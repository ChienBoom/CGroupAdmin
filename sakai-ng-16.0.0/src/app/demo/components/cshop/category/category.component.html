<div *ngIf="isLoading" class="loading-container">
  <!-- <p-progressBar mode="indeterminate" [style]="{ height: '6px' }"></p-progressBar> -->
  <p-progressSpinner></p-progressSpinner>
  <p>{{'Common.Loading' | translate}}...</p>
</div>
<div *ngIf="!isLoading">
    <p-toast key="msg-toast"></p-toast>
    <p-confirmDialog></p-confirmDialog>
    <div class="flex items-center justify-between">
        <span class="font-semibold text-xl text-primary"
            >{{'CShop.Category.Title' | translate}}</span
        >
        <div>
            <span class="p-input-icon-right">
                <input type="text" pInputText placeholder="Search" />
                <i class="pi pi-search"></i>
            </span>
            <button
            (click)="handleCreate()"
                pButton
                pRipple
                label="{{'Common.Add' | translate}}"
                class="ml-[20px]"
                icon="pi pi-plus"
            ></button>
        </div>
    </div>
    <section class="mt-[30px]">
        <p-table [value]="data" [scrollable]="true" scrollHeight="calc(100vh - 260px)" [tableStyle]="{ 'min-width': '50rem' }">
            <ng-template pTemplate="header">
                <tr>
                    <th>{{'Common.Position' | translate}}</th>
                    <th>{{'CShop.Category.Name' | translate}}</th>
                    <th class="text-center">{{'CShop.Category.Quantity' | translate}}</th>
                    <th>{{'CShop.Category.Image' | translate}}</th>
                    <th>{{'CShop.Category.Description' | translate}}</th>
                    <th class="text-center">{{'Common.Operation' | translate}}</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
                <tr>
                    <td>{{ item.position }}</td>
                    <td>{{ item.name }}</td>
                    <td class="text-center">{{ item.numberProduct }}</td>
                    <td>
                        <p-image
                            src="{{item.pictureUrl}}"
                            alt="Image"
                            width="100"
                            loading="lazy"
                            [preview]="true"
                        ></p-image>
                    </td>
                    <td>{{ item.description }}</td>
                    <td>
                        <div class="flex items-center justify-center gap-2">
                            <button pButton pRipple type="button" icon="pi pi-file-edit" class="p-button-rounded p-button-text" (click)="handleCopy(item)"></button>
                            <button pButton pRipple type="button" icon="pi pi pi-trash" class="p-button-rounded p-button-text" (click)="handleDelete(item.id)"></button>
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
        <p-paginator (onPageChange)="onPageChange($event)" [first]="first" [rows]="rows" [totalRecords]="data.length" [rowsPerPageOptions]="pageOption"></p-paginator>
    </section>
</div>
